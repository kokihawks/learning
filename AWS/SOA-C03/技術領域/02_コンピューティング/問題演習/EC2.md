# EC2 問題集

---

## 問題1

ある企業が、EC2インスタンスを起動する際に、インスタンスストアボリュームを使用して高パフォーマンスが必要なワークロードを実行しています。インスタンスを停止して再起動した場合、インスタンスストアボリュームのデータについて正しい説明はどれですか？

A. インスタンスストアボリュームのデータは保持される

B. インスタンスストアボリュームのデータは失われる

C. インスタンスストアボリュームのデータはEBSボリュームに自動的にバックアップされる

D. インスタンスストアボリュームのデータはS3に自動的にバックアップされる

---

<details>
<summary>解答1を表示</summary>

### 正解

**正解: B**

### 解説

**A. 誤り** - インスタンスストアボリュームは一時的なストレージであり、インスタンスが停止または終了するとデータが失われます。

**B. 正しい** - インスタンスストアボリュームは、EC2インスタンスに物理的に接続された一時的なストレージです。インスタンスが停止または終了すると、インスタンスストアボリュームのデータは失われます。

**C. 誤り** - インスタンスストアボリュームのデータは自動的にEBSボリュームにバックアップされません。手動でバックアップする必要があります。

**D. 誤り** - インスタンスストアボリュームのデータは自動的にS3にバックアップされません。手動でバックアップする必要があります。

### 参考

- [AWS EC2インスタンスストア公式ドキュメント](https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/InstanceStorage.html)

</details>

---

## 問題2

ある企業が、EC2インスタンスを起動する際に、Elastic IPアドレスを割り当てています。以下のうち、Elastic IPアドレスについて正しい説明はどれですか？（2つ選択してください）

A. Elastic IPアドレスは、インスタンスを停止しても保持される

B. Elastic IPアドレスは、インスタンスを終了すると自動的に解放される

C. 使用していないElastic IPアドレスには料金が発生する

D. Elastic IPアドレスは、同じリージョン内の別のインスタンスに再割り当て可能

E. Elastic IPアドレスは、異なるリージョン間で移動可能

---

<details>
<summary>解答2を表示</summary>

### 正解

**正解: A, D**

### 解説

**A. 正しい** - Elastic IPアドレスは、インスタンスを停止しても保持されます。インスタンスを再起動すると、同じElastic IPアドレスが自動的に割り当てられます。

**B. 誤り** - Elastic IPアドレスは、インスタンスを終了しても自動的に解放されません。手動で解放する必要があります。

**C. 正しい** - 使用していないElastic IPアドレス（インスタンスに割り当てられていないElastic IPアドレス）には料金が発生します。

**D. 正しい** - Elastic IPアドレスは、同じリージョン内の別のインスタンスに再割り当て可能です。

**E. 誤り** - Elastic IPアドレスは、リージョン固有のリソースであり、異なるリージョン間で移動することはできません。

### 参考

- [AWS Elastic IP公式ドキュメント](https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/elastic-ip-addresses-eip.html)

</details>

---

## 問題3

ある企業が、大量のデータをメモリ内で処理する必要があるワークロードを実行しています。CPUパフォーマンスよりもメモリ容量が重要です。

この要件を満たすために、最も適切なEC2インスタンスタイプはどれですか？

A. M5（汎用インスタンス）

B. C5（コンピューティング最適化インスタンス）

C. R5（メモリ最適化インスタンス）

D. I3（ストレージ最適化インスタンス）

---

<details>
<summary>解答3を表示</summary>

### 正解

**正解: C**

### 解説

**A. 誤り** - M5は汎用インスタンスであり、CPU、メモリ、ネットワークのバランスが取れていますが、メモリ容量が最優先の要件には適していません。

**B. 誤り** - C5はコンピューティング最適化インスタンスであり、CPUパフォーマンスが高いですが、メモリ容量は限られています。

**C. 正しい** - R5はメモリ最適化インスタンスであり、メモリ容量が大きいため、大量のデータをメモリ内で処理するワークロードに最適です。

**D. 誤り** - I3はストレージ最適化インスタンスであり、ストレージ容量とIOPSが高いですが、メモリ容量が最優先の要件には適していません。

### 参考

- [AWS EC2インスタンスタイプ公式ドキュメント](https://aws.amazon.com/ec2/instance-types/)

</details>

---

## 問題4

ある企業が、EC2インスタンスからインスタンスメタデータサービス（IMDS）を使用してインスタンス情報を取得しています。セキュリティを向上させるために、IMDSv2の使用を検討しています。

IMDSv2とIMDSv1の主な違いはどれですか？

A. IMDSv2は、インスタンス外からもアクセス可能である

B. IMDSv2は、セッショントークンが必要で、よりセキュアである

C. IMDSv2は、IMDSv1よりも高速である

D. IMDSv2は、すべてのリージョンで利用可能ではない

---

<details>
<summary>解答4を表示</summary>

### 正解

**正解: B**

### 解説

**A. 誤り** - IMDSv2もIMDSv1と同様に、インスタンス内からのみアクセス可能です。インスタンス外からはアクセスできません。

**B. 正しい** - IMDSv2は、セッショントークンを使用してアクセスする必要があり、IMDSv1よりもセキュアです。SSRF（Server-Side Request Forgery）攻撃に対する防御が強化されています。

**C. 誤り** - IMDSv2は、セキュリティを向上させるためのものであり、速度の向上が主な目的ではありません。

**D. 誤り** - IMDSv2は、すべてのリージョンで利用可能です。

### 参考

- [AWS インスタンスメタデータサービス公式ドキュメント](https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ec2-instance-metadata.html)

</details>

---

## 問題5

ある企業が、EC2インスタンス起動時に自動的にソフトウェアをインストールする必要があります。ユーザーデータを使用してこの要件を実現しようとしています。

ユーザーデータについて正しい説明はどれですか？（2つ選択してください）

A. ユーザーデータは、インスタンス起動時に1回だけ実行される

B. ユーザーデータは、最大32KBまで記述可能である

C. ユーザーデータは、Base64エンコードが必要である

D. ユーザーデータは、インスタンス起動後も定期的に実行される

E. ユーザーデータは、Windowsインスタンスでは使用できない

---

<details>
<summary>解答5を表示</summary>

### 正解

**正解: A, C**

### 解説

**A. 正しい** - ユーザーデータは、インスタンス起動時に1回だけ実行されます。

**B. 誤り** - ユーザーデータは、最大16KBまで記述可能です。32KBではありません。

**C. 正しい** - ユーザーデータは、Base64エンコードが必要です。

**D. 誤り** - ユーザーデータは、インスタンス起動時に1回だけ実行されます。定期的に実行されることはありません。

**E. 誤り** - ユーザーデータは、Windowsインスタンスでも使用可能です。PowerShellスクリプトを使用できます。

### 参考

- [AWS ユーザーデータ公式ドキュメント](https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/user-data.html)

</details>

---

## 問題6

ある企業が、HDFSクラスターをAWS上で構築しています。複数のインスタンスを論理的なパーティションに分離し、パーティション間で障害が伝播しないようにする必要があります。

この要件を満たすために、最も適切なプレースメントグループの種類はどれですか？

A. クラスター配置グループ

B. パーティション配置グループ

C. 分散配置グループ

D. 集中配置グループ

---

<details>
<summary>解答6を表示</summary>

### 正解

**正解: B**

### 解説

**A. 誤り** - クラスター配置グループは、インスタンスを同じラックに配置して低レイテンシを実現しますが、論理的なパーティションに分離する機能はありません。

**B. 正しい** - パーティション配置グループは、インスタンスを論理的なパーティションに分離し、パーティション間で障害が伝播しないようにします。HDFS、HBase、Cassandraなどの分散システムに適しています。

**C. 誤り** - 分散配置グループは、インスタンスを最大限に分散させますが、論理的なパーティションに分離する機能はありません。

**D. 誤り** - 集中配置グループという種類のプレースメントグループは存在しません。

### 参考

- [AWS プレースメントグループ公式ドキュメント](https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/placement-groups.html)

</details>

---

## 問題7

ある企業が、コンプライアンス要件を満たすために、単一のAWSアカウント専用のハードウェアでEC2インスタンスを実行する必要があります。また、既存のソフトウェアライセンスを使用したいと考えています。

この要件を満たすために、最も適切なソリューションはどれですか？

A. Dedicated Instances

B. Dedicated Hosts

C. Reserved Instances

D. Spot Instances

---

<details>
<summary>解答7を表示</summary>

### 正解

**正解: B**

### 解説

**A. 誤り** - Dedicated Instancesは、単一のAWSアカウント専用のハードウェアで実行されますが、既存のソフトウェアライセンスを使用することはできません。AWSがライセンスを管理します。

**B. 正しい** - Dedicated Hostsは、物理サーバー全体を専有でき、既存のソフトウェアライセンスを使用できます。コンプライアンス要件とライセンス要件の両方を満たします。

**C. 誤り** - Reserved Instancesは、コスト削減のためのものであり、専用ハードウェアやライセンス管理の機能はありません。

**D. 誤り** - Spot Instancesは、コスト削減のためのものであり、専用ハードウェアやライセンス管理の機能はありません。

### 参考

- [AWS Dedicated Hosts公式ドキュメント](https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/dedicated-hosts-overview.html)

</details>

---

## 問題8

ある企業が、特定の可用性ゾーンで確実にEC2インスタンスを起動する必要があります。コスト削減よりも容量の保証が重要です。

この要件を満たすために、最も適切なソリューションはどれですか？

A. Reserved Instances

B. Saving Plans

C. 容量予約（Capacity Reservations）

D. Spot Instances

---

<details>
<summary>解答8を表示</summary>

### 正解

**正解: C**

### 解説

**A. 誤り** - Reserved Instancesは、コスト削減のためのものであり、特定のAZで容量を保証する機能はありません。

**B. 誤り** - Saving Plansは、コスト削減のためのものであり、特定のAZで容量を保証する機能はありません。

**C. 正しい** - 容量予約（Capacity Reservations）は、特定の可用性ゾーンで容量を予約し、確実にインスタンスを起動できるようにします。コスト削減ではなく、容量の保証が目的です。

**D. 誤り** - Spot Instancesは、容量が保証されず、中断される可能性があります。

### 参考

- [AWS 容量予約公式ドキュメント](https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/capacity-reservations-using.html)

</details>

---

## 問題9

ある企業が、EBSボリュームのスナップショットを作成しています。スナップショットについて正しい説明はどれですか？（2つ選択してください）

A. スナップショットは、初回はフルバックアップ、以降は増分バックアップである

B. スナップショットは、暗号化されたボリュームから作成すると、暗号化されていないスナップショットになる

C. スナップショットは、別のリージョンにコピー可能である

D. スナップショットは、作成時にボリュームを停止する必要がある

E. スナップショットは、他のAWSアカウントと共有できない

---

<details>
<summary>解答9を表示</summary>

### 正解

**正解: A, C**

### 解説

**A. 正しい** - EBSスナップショットは、初回はフルバックアップ、以降は増分バックアップです。変更されたブロックのみが保存されます。

**B. 誤り** - 暗号化されたボリュームから作成したスナップショットも暗号化されます。

**C. 正しい** - スナップショットは、別のリージョンにコピー可能です。これにより、災害復旧やリージョン間のデータ移動が可能です。

**D. 誤り** - スナップショットは、実行中のインスタンスに接続されているボリュームからも作成可能です。ボリュームを停止する必要はありません。

**E. 誤り** - スナップショットは、他のAWSアカウントと共有可能です。

### 参考

- [AWS EBSスナップショット公式ドキュメント](https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/EBSSnapshots.html)

</details>

---

## 問題10

ある企業が、EC2インスタンスのモニタリングを設定しています。1分間隔でメトリクスを収集したいと考えています。

この要件を満たすために、最も適切な方法はどれですか？

A. 基本モニタリングを有効化する

B. 詳細モニタリングを有効化する

C. CloudWatchエージェントをインストールする

D. カスタムメトリクスを設定する

---

<details>
<summary>解答10を表示</summary>

### 正解

**正解: B**

### 解説

**A. 誤り** - 基本モニタリングは、5分間隔でメトリクスを収集します。1分間隔ではありません。

**B. 正しい** - 詳細モニタリングは、1分間隔でメトリクスを収集します。追加料金が発生しますが、より詳細なメトリクスを取得できます。

**C. 誤り** - CloudWatchエージェントは、カスタムメトリクスやログを収集するためのものであり、標準的なメトリクスの収集間隔を変更するものではありません。

**D. 誤り** - カスタムメトリクスは、標準的なメトリクスの収集間隔を変更するものではありません。

### 参考

- [AWS EC2モニタリング公式ドキュメント](https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/monitoring_ec2.html)

</details>

---

## 問題11

ある企業が、EC2インスタンスにSSHやRDPを使用せずに接続したいと考えています。セキュリティを向上させ、ポート22や3389を開く必要がないようにしたいです。

この要件を満たすために、最も適切なソリューションはどれですか？

A. VPN接続を使用する

B. Systems Manager Session Managerを使用する

C. セキュリティグループでSSHポートを開く

D. パブリックIPアドレスを割り当てる

---

<details>
<summary>解答11を表示</summary>

### 正解

**正解: B**

### 解説

**A. 誤り** - VPN接続を使用しても、SSHやRDPを使用する必要があり、ポートを開く必要があります。

**B. 正しい** - Systems Manager Session Managerは、SSHやRDPを使用せずにインスタンスに接続できます。ポート22や3389を開く必要がなく、IAMでアクセスを制御できます。セッションのログも記録されます。

**C. 誤り** - セキュリティグループでSSHポートを開くと、SSHを使用する必要があり、要件を満たしません。

**D. 誤り** - パブリックIPアドレスを割り当てても、SSHやRDPを使用する必要があり、ポートを開く必要があります。

### 参考

- [AWS Systems Manager Session Manager公式ドキュメント](https://docs.aws.amazon.com/systems-manager/latest/userguide/session-manager.html)

</details>

---

## 問題12

ある企業が、スポットインスタンスを使用してコストを削減したいと考えています。複数のインスタンスタイプやAZを組み合わせて、スポットインスタンスとオンデマンドインスタンスを混在させたいです。

この要件を満たすために、最も適切なソリューションはどれですか？

A. スポットインスタンスリクエスト

B. スポットフリート（Spot Fleet）

C. スポットブロック

D. Auto Scalingグループ

---

<details>
<summary>解答12を表示</summary>

### 正解

**正解: B**

### 解説

**A. 誤り** - スポットインスタンスリクエストは、単一のインスタンスタイプとAZを指定するものであり、複数のインスタンスタイプやAZを組み合わせることはできません。

**B. 正しい** - スポットフリート（Spot Fleet）は、複数のインスタンスタイプやAZを組み合わせて、スポットインスタンスとオンデマンドインスタンスを混在させることができます。ターゲットキャパシティに基づいて自動スケーリングも可能です。

**C. 誤り** - スポットブロックは、1-6時間の期間でスポットインスタンスを予約する機能ですが、現在は非推奨です。

**D. 誤り** - Auto Scalingグループは、スポットインスタンスとオンデマンドインスタンスを混在させることはできますが、複数のインスタンスタイプやAZを組み合わせる機能は、スポットフリートほど柔軟ではありません。

### 参考

- [AWS スポットフリート公式ドキュメント](https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/spot-fleet.html)

</details>

---

## 問題13

ある企業が、EC2インスタンスの起動設定を再利用可能なテンプレートとして管理したいと考えています。複数のバージョンを管理し、Auto Scalingグループで使用したいです。

この要件を満たすために、最も適切なソリューションはどれですか？

A. 起動設定（Launch Configuration）

B. 起動テンプレート（Launch Template）

C. AMI

D. ユーザーデータ

---

<details>
<summary>解答13を表示</summary>

### 正解

**正解: B**

### 解説

**A. 誤り** - 起動設定（Launch Configuration）は、再利用可能ですが、バージョン管理の機能がなく、変更できないため、新しい起動設定を作成する必要があります。

**B. 正しい** - 起動テンプレート（Launch Template）は、インスタンスの起動設定を定義するテンプレートで、複数のバージョンを管理できます。Auto Scalingグループでも使用可能です。

**C. 誤り** - AMIは、インスタンスのイメージであり、起動設定のテンプレートではありません。

**D. 誤り** - ユーザーデータは、インスタンス起動時に実行されるスクリプトであり、起動設定のテンプレートではありません。

### 参考

- [AWS 起動テンプレート公式ドキュメント](https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ec2-launch-templates.html)

</details>

---

## 問題14

ある企業が、EC2インスタンスのネットワークパフォーマンスを向上させたいと考えています。最大100Gbpsの帯域幅を必要としており、多くのインスタンスタイプでサポートされているソリューションを探しています。

この要件を満たすために、最も適切なエンハンスドネットワーキングの種類はどれですか？

A. SR-IOV（Single Root I/O Virtualization）

B. ENA（Elastic Network Adapter）

C. 標準ネットワークアダプター

D. カスタムネットワークアダプター

---

<details>
<summary>解答14を表示</summary>

### 正解

**正解: B**

### 解説

**A. 誤り** - SR-IOVは、高いネットワークパフォーマンスを提供しますが、特定のインスタンスタイプでのみサポートされており、多くのインスタンスタイプでサポートされているわけではありません。

**B. 正しい** - ENA（Elastic Network Adapter）は、最大100Gbpsの帯域幅を提供し、多くのインスタンスタイプでサポートされています。新規の使用ではENAが推奨されます。

**C. 誤り** - 標準ネットワークアダプターは、エンハンスドネットワーキングではなく、パフォーマンスが限られています。

**D. 誤り** - カスタムネットワークアダプターというものは存在しません。

### 参考

- [AWS エンハンスドネットワーキング公式ドキュメント](https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/enhanced-networking.html)

</details>

---

## 問題15

ある企業が、Auto ScalingグループでEC2インスタンスのライフサイクルイベントに介入したいと考えています。インスタンス起動時にアプリケーションの準備を完了し、インスタンス終了時にグレースフルシャットダウンを実行したいです。

この要件を満たすために、最も適切なソリューションはどれですか？

A. ユーザーデータ

B. ライフサイクルフック

C. CloudWatch Events

D. EventBridge

---

<details>
<summary>解答15を表示</summary>

### 正解

**正解: B**

### 解説

**A. 誤り** - ユーザーデータは、インスタンス起動時に1回だけ実行されますが、インスタンス終了時の処理には使用できません。

**B. 正しい** - ライフサイクルフックは、Auto Scalingグループのインスタンスのライフサイクルイベント（起動時や終了時）に介入する機能です。インスタンス起動時にアプリケーションの準備を完了し、インスタンス終了時にグレースフルシャットダウンを実行できます。

**C. 誤り** - CloudWatch Eventsは、イベントを監視できますが、インスタンスのライフサイクルイベントに直接介入する機能はありません。

**D. 誤り** - EventBridgeは、イベントを監視できますが、インスタンスのライフサイクルイベントに直接介入する機能はありません。

### 参考

- [AWS Auto Scalingライフサイクルフック公式ドキュメント](https://docs.aws.amazon.com/autoscaling/ec2/userguide/lifecycle-hooks.html)

</details>

---

## 問題16

ある企業が、EC2インスタンスの購入オプションを比較しています。以下のうち、中断リスクがある購入オプションはどれですか？

A. オンデマンドインスタンス

B. Reserved Instances

C. Saving Plans

D. Spot Instances

---

<details>
<summary>解答16を表示</summary>

### 正解

**正解: D**

### 解説

**A. 誤り** - オンデマンドインスタンスは、中断されるリスクはありません。必要な時に起動し、必要な期間使用できます。

**B. 誤り** - Reserved Instancesは、1年または3年のコミットメントで割引を受けますが、中断されるリスクはありません。

**C. 誤り** - Saving Plansは、使用量ベースのコミットメントで割引を受けますが、中断されるリスクはありません。

**D. 正しい** - Spot Instancesは、AWSが容量を必要とする場合に中断される可能性があります。最大90%の割引を受けられますが、中断リスクがあります。

### 参考

- [AWS EC2購入オプション公式ドキュメント](https://aws.amazon.com/ec2/pricing/)

</details>

---

## 問題17

ある企業が、EC2インスタンスのスケジュールされたイベントを監視したいと考えています。インスタンスのメンテナンスやリタイアメントに関する通知を受け取りたいです。

スケジュールされたイベントを確認する方法として、正しいものはどれですか？（2つ選択してください）

A. インスタンスメタデータからイベントを確認する

B. EventBridgeでイベントを監視する

C. CloudWatch Logsでイベントを確認する

D. S3バケットにイベントを保存する

E. イベントは確認できない

---

<details>
<summary>解答17を表示</summary>

### 正解

**正解: A, B**

### 解説

**A. 正しい** - インスタンスメタデータサービス（IMDS）から、スケジュールされたイベントを確認できます。`http://169.254.169.254/latest/meta-data/events/` でアクセス可能です。

**B. 正しい** - EventBridge（旧CloudWatch Events）で、スケジュールされたイベントを監視できます。イベントルールを作成して、通知を受け取ることができます。

**C. 誤り** - CloudWatch Logsは、ログを収集するためのものであり、スケジュールされたイベントを確認するものではありません。

**D. 誤り** - S3バケットにイベントを保存する機能はありません。

**E. 誤り** - イベントは確認可能です。

### 参考

- [AWS EC2スケジュールされたイベント公式ドキュメント](https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/monitoring-instances-status-check_sched.html)

</details>

---

## 問題18

ある企業が、EC2インスタンスからCloudWatchにカスタムメトリクスやログを送信したいと考えています。メモリやディスクのメトリクスも収集したいです。

この要件を満たすために、最も適切なソリューションはどれですか？

A. 基本モニタリング

B. 詳細モニタリング

C. CloudWatchエージェント

D. CloudWatch Logsエージェント

---

<details>
<summary>解答18を表示</summary>

### 正解

**正解: C**

### 解説

**A. 誤り** - 基本モニタリングは、標準的なメトリクス（CPU、ネットワーク、ディスク、ステータスチェック）のみを収集し、カスタムメトリクスやメモリのメトリクスは収集しません。

**B. 誤り** - 詳細モニタリングは、標準的なメトリクスを1分間隔で収集しますが、カスタムメトリクスやメモリのメトリクスは収集しません。

**C. 正しい** - CloudWatchエージェントは、カスタムメトリクスやログを収集できます。メモリやディスクのメトリクスも収集可能です。

**D. 誤り** - CloudWatch Logsエージェントは、ログのみを収集し、メトリクスは収集しません。また、現在は非推奨で、CloudWatchエージェントの使用が推奨されています。

### 参考

- [AWS CloudWatchエージェント公式ドキュメント](https://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/Install-CloudWatch-Agent.html)

</details>

---

