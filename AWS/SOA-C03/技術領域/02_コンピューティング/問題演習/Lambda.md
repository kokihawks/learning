# Lambda 問題集

---

## 問題1

ある企業が、Lambda関数を作成して、S3バケットのイベント（オブジェクトの作成）に応じて実行するように設定しています。Lambda関数の実行に失敗した場合、自動的にリトライされるのはどれですか？

A. 同期実行の場合のみ

B. 非同期実行の場合のみ

C. 同期実行と非同期実行の両方

D. リトライは自動的に行われない

---

<details>
<summary>解答1を表示</summary>

### 正解

**正解: B**

### 解説

**A. 誤り** - 同期実行の場合、エラーが発生すると即座に呼び出し元にエラーが返されるため、自動的にリトライされません。

**B. 正しい** - 非同期実行の場合、エラーが発生すると自動的にリトライされます。デフォルトでは2回リトライされ、その後、デッドレターキュー（DLQ）に送信されるか、イベントが破棄されます。

**C. 誤り** - 同期実行では自動的にリトライされません。

**D. 誤り** - 非同期実行では自動的にリトライされます。

### 参考

- [AWS Lambdaエラーハンドリング公式ドキュメント](https://docs.aws.amazon.com/lambda/latest/dg/invocation-retries.html)

</details>

---

## 問題2

ある企業が、Lambda関数をVPC内のRDSデータベースにアクセスするように設定しています。VPC統合を使用する場合、以下のうち正しい説明はどれですか？（2つ選択してください）

A. Lambda関数がVPC内にENI（Elastic Network Interface）を作成する

B. Lambda関数は自動的にインターネットにアクセスできる

C. Lambda関数のコールドスタートの時間が長くなる可能性がある

D. Lambda関数はVPC内のリソースにのみアクセスでき、インターネットにはアクセスできない

E. Lambda関数のセキュリティグループは設定できない

---

<details>
<summary>解答2を表示</summary>

### 正解

**正解: A, C**

### 解説

**A. 正しい** - Lambda関数をVPCに統合すると、Lambda関数がVPC内にENI（Elastic Network Interface）を作成します。これにより、VPC内のリソースにアクセスできるようになります。

**B. 誤り** - VPC統合を使用すると、Lambda関数は自動的にインターネットにアクセスできません。インターネットアクセスが必要な場合は、NATゲートウェイまたはVPCエンドポイントを使用する必要があります。

**C. 正しい** - VPC統合を使用すると、ENIの作成に時間がかかるため、コールドスタートの時間が長くなる可能性があります。プロビジョンド同時実行を使用することで、コールドスタートを削減できます。

**D. 誤り** - Lambda関数はVPC内のリソースにアクセスできますが、NATゲートウェイまたはVPCエンドポイントを使用すれば、インターネットにもアクセスできます。

**E. 誤り** - Lambda関数のVPC統合では、セキュリティグループを設定できます。セキュリティグループでトラフィックを制御できます。

### 参考

- [AWS Lambda VPC統合公式ドキュメント](https://docs.aws.amazon.com/lambda/latest/dg/configuration-vpc.html)

</details>

---

