# AWS Budgetsについて

## 概要

AWS Budgetsは、AWSのコストと使用量を監視し、予算を設定・管理するためのツールです。予算を設定することで、コストが予算を超えた場合にアラートを送信し、コスト管理を自動化できます。

## 主な機能

### 1. コスト予算（Cost Budget）

#### 概要
コスト予算は、AWSのコストが予算を超えた場合にアラートを送信する機能です。

#### 特徴
- **予算の設定**: 月次、四半期、年次の予算を設定可能
- **アラート**: 予算の50%、80%、100%に達した場合にアラートを送信
- **カスタムアラート**: 任意の閾値でアラートを設定可能
- **通知**: メール、SNS、Chatbotなどで通知

#### 適用範囲
- すべてのAWSサービスのコスト
- 特定のサービスのコスト
- タグに基づいたコスト

---

### 2. 使用量予算（Usage Budget）

#### 概要
使用量予算は、AWSサービスの使用量が予算を超えた場合にアラートを送信する機能です。

#### 特徴
- **使用量の監視**: サービスごとの使用量を監視
- **アラート**: 使用量が予算を超えた場合にアラートを送信
- **カスタムアラート**: 任意の閾値でアラートを設定可能
- **通知**: メール、SNS、Chatbotなどで通知

#### 適用範囲
- EC2インスタンスの使用時間
- S3ストレージの使用量
- データ転送量
- その他のAWSサービスの使用量

---

### 3. 予約使用量予算（Reservation Utilization Budget）

#### 概要
予約使用量予算は、Reserved InstancesやSaving Plansの使用率を監視する機能です。

#### 特徴
- **使用率の監視**: Reserved InstancesやSaving Plansの使用率を監視
- **アラート**: 使用率が閾値を下回った場合にアラートを送信
- **最適化**: 未使用のReserved InstancesやSaving Plansを特定

#### 適用範囲
- EC2 Reserved Instances
- RDS Reserved Instances
- Saving Plans

---

### 4. 予約カバレッジ予算（Reservation Coverage Budget）

#### 概要
予約カバレッジ予算は、Reserved InstancesやSaving Plansでカバーされている使用量の割合を監視する機能です。

#### 特徴
- **カバレッジの監視**: Reserved InstancesやSaving Plansでカバーされている使用量の割合を監視
- **アラート**: カバレッジが閾値を下回った場合にアラートを送信
- **最適化**: 追加のReserved InstancesやSaving Plansの購入を提案

#### 適用範囲
- EC2 Reserved Instances
- RDS Reserved Instances
- Saving Plans

---

## 予算の種類

### 1. コスト予算（Cost Budget）

#### 設定項目
- **予算額**: 月次、四半期、年次の予算額を設定
- **期間**: 月次、四半期、年次を選択
- **フィルタ**: サービス、アカウント、リージョン、タグなどでフィルタリング
- **アラート**: 予算の50%、80%、100%に達した場合にアラートを送信

#### 使用例
- 月次予算: 10,000ドル
- 四半期予算: 30,000ドル
- 年次予算: 120,000ドル

---

### 2. 使用量予算（Usage Budget）

#### 設定項目
- **使用量**: サービスごとの使用量を設定
- **単位**: 時間、GB、リクエスト数など
- **フィルタ**: サービス、アカウント、リージョン、タグなどでフィルタリング
- **アラート**: 使用量が予算を超えた場合にアラートを送信

#### 使用例
- EC2インスタンスの使用時間: 1,000時間/月
- S3ストレージの使用量: 1TB/月
- データ転送量: 100GB/月

---

### 3. 予約使用量予算（Reservation Utilization Budget）

#### 設定項目
- **使用率**: Reserved InstancesやSaving Plansの使用率を設定
- **閾値**: 使用率が閾値を下回った場合にアラートを送信
- **フィルタ**: サービス、アカウント、リージョンなどでフィルタリング

#### 使用例
- EC2 Reserved Instancesの使用率: 80%以上
- RDS Reserved Instancesの使用率: 75%以上
- Saving Plansの使用率: 85%以上

---

### 4. 予約カバレッジ予算（Reservation Coverage Budget）

#### 設定項目
- **カバレッジ**: Reserved InstancesやSaving Plansでカバーされている使用量の割合を設定
- **閾値**: カバレッジが閾値を下回った場合にアラートを送信
- **フィルタ**: サービス、アカウント、リージョンなどでフィルタリング

#### 使用例
- EC2インスタンスのカバレッジ: 80%以上
- RDSインスタンスのカバレッジ: 75%以上
- Saving Plansのカバレッジ: 85%以上

---

## アラートの設定

### 1. アラートの種類

#### 実際のコスト/使用量（Actual）
- 実際のコスト/使用量が閾値を超えた場合にアラートを送信
- リアルタイムのアラート

#### 予測コスト/使用量（Forecasted）
- 予測されたコスト/使用量が閾値を超えた場合にアラートを送信
- 将来のコスト/使用量を予測してアラート

---

### 2. アラートの閾値

#### デフォルトの閾値
- **50%**: 予算の50%に達した場合
- **80%**: 予算の80%に達した場合
- **100%**: 予算の100%に達した場合

#### カスタム閾値
- 任意の閾値を設定可能
- 複数の閾値を設定可能

---

### 3. 通知の方法

#### メール通知
- 指定したメールアドレスに通知を送信
- 複数のメールアドレスに通知可能

#### SNS通知
- SNSトピックに通知を送信
- Lambda関数やその他のサービスと連携可能

#### Chatbot通知
- SlackやMicrosoft Teamsに通知を送信
- リアルタイムの通知

---

## 予算の作成方法

### 1. 基本的な予算の作成

#### ステップ1: 予算タイプの選択
- コスト予算、使用量予算、予約使用量予算、予約カバレッジ予算から選択

#### ステップ2: 予算の設定
- 予算額または使用量を設定
- 期間を選択（月次、四半期、年次）

#### ステップ3: フィルタの設定
- サービス、アカウント、リージョン、タグなどでフィルタリング

#### ステップ4: アラートの設定
- アラートの閾値を設定
- 通知方法を選択

#### ステップ5: 予算の確認と作成
- 予算の設定を確認
- 予算を作成

---

### 2. テンプレートからの予算作成

#### テンプレートの種類
- **月次コスト予算**: 月次コスト予算のテンプレート
- **四半期コスト予算**: 四半期コスト予算のテンプレート
- **年次コスト予算**: 年次コスト予算のテンプレート

#### テンプレートの活用
- テンプレートから予算を作成
- テンプレートをカスタマイズ

---

## 予算の管理

### 1. 予算の確認

#### 予算の一覧
- すべての予算を一覧表示
- 予算の状態を確認

#### 予算の詳細
- 予算の詳細情報を確認
- コスト/使用量の推移を確認

---

### 2. 予算の編集

#### 予算の更新
- 予算額や使用量を更新
- アラートの設定を変更

#### 予算の削除
- 不要な予算を削除
- 予算の履歴を保持

---

### 3. 予算の履歴

#### 履歴の確認
- 過去の予算の履歴を確認
- 予算の変更履歴を確認

---

## AWS Budgetsのベストプラクティス

### 1. 段階的な予算設定
- まずは月次予算から始める
- 四半期、年次予算を段階的に設定

### 2. 適切な閾値の設定
- 50%、80%、100%の閾値を設定
- カスタム閾値を必要に応じて設定

### 3. 通知の設定
- 複数の通知方法を設定
- 重要な予算には複数の通知先を設定

### 4. 定期的な見直し
- 予算を定期的に見直す
- 実際のコスト/使用量に基づいて予算を調整

### 5. タグ付けの活用
- タグに基づいて予算を設定
- プロジェクトや部門ごとに予算を管理

---

## AWS Budgetsの制限事項

### 1. 予算の数
- アカウントごとに最大20,000個の予算を作成可能
- 予算の数が多すぎると管理が困難

### 2. アラートの数
- 予算ごとに最大10個のアラートを設定可能
- アラートの数が多すぎると通知が多くなる

### 3. データの遅延
- コストデータは24-48時間の遅延がある
- リアルタイムのアラートは取得できない

---

## 参考資料

- [AWS Budgets公式ドキュメント](https://aws.amazon.com/aws-cost-management/aws-budgets/)
- [AWS Cost Management](https://aws.amazon.com/aws-cost-management/)
- [AWS Budgets API](https://docs.aws.amazon.com/budgets/latest/APIReference/Welcome.html)

